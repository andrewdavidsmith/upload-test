name: Test ncurses on macOS

on:
  workflow_dispatch:

jobs:
  macos-test:
    runs-on: macos-13
    steps:
    - uses: actions/checkout@v4
    - name: Update Homebrew
      run: brew update
    - name: Install dependencies
      run: |
        brew install ncurses
        brew link ncurses
    - name: Configure
      run: |
        brew --prefix
        sudo find /usr -name libncurses.a
        sudo find /usr -name ncurses.h
        gcc-14 main.c -I/usr/local/Cellar/ncurses/6.5/include -I$(brew --prefix)/include -L/usr/local/Cellar/ncurses/6.5/lib -L$(brew --prefix)/lib
        a.out
